<h1>All Listings</h1>

<div class="filters">
  <%= link_to "All", listings_path, class: "filter-btn" %>
  <%= link_to "Auctions", listings_path(type: "auction"), class: "filter-btn" %>
  <%= link_to "Classifieds", listings_path(type: "classified"), class: "filter-btn" %>
</div>

<% if @listings.any? %>
  <div class="listings-grid">
    <% @listings.each do |listing| %>
      <div class="listing-card">
        <%= link_to listing_path(listing) do %>
          <div class="listing-type <%= listing.listing_type %>">
            <%= listing.listing_type.capitalize %>
          </div>
          <h3><%= listing.title %></h3>
          <p class="listing-description"><%= truncate(listing.description, length: 100) %></p>
          <div class="listing-footer">
            <span class="listing-price">$<%= number_with_precision(listing.current_price, precision: 2) %></span>
            <span class="listing-category"><%= listing.category.name %></span>
          </div>
          <div class="listing-meta">
            <small>Posted by <%= listing.user.name %></small>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>
  <p>No listings found.</p>
<% end %>
